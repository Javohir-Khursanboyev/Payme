CREATE TABLE IF NOT EXISTS Users (
    Id BIGSERIAL PRIMARY KEY,
    FirstName VARCHAR(100) NOT NULL,
    LastName VARCHAR(100) NOT NULL,
    Phone VARCHAR(20) NOT NULL,
    Password VARCHAR(255) NOT NULL,
    Role INT NOT NULL,
    CreatedAt TIMESTAMP WITHOUT TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UpdatedAt TIMESTAMP WITHOUT TIME ZONE,
    DeletedAt TIMESTAMP WITHOUT TIME ZONE,
    IsDeleted BOOLEAN NOT NULL DEFAULT FALSE
);

CREATE TABLE IF NOT EXISTS Cards (
    Id BIGSERIAL PRIMARY KEY,
    CustomerId BIGINT NOT NULL,
    Type INT NOT NULL,
    Number BIGINT NOT NULL,
    ExpiryDate VARCHAR(10) NOT NULL,
    Password VARCHAR(255) NOT NULL,
    Balance DECIMAL(18, 2) NOT NULL,
    CreatedAt TIMESTAMP WITHOUT TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UpdatedAt TIMESTAMP WITHOUT TIME ZONE,
    DeletedAt TIMESTAMP WITHOUT TIME ZONE,
    IsDeleted BOOLEAN NOT NULL DEFAULT FALSE,
    CONSTRAINT FK_Cards_Customers FOREIGN KEY (CustomerId) REFERENCES Users(Id)
);

CREATE TABLE IF NOT EXISTS Transactions (
    Id BIGSERIAL PRIMARY KEY,
    SenderCardId BIGINT NOT NULL,
    ReceiverCardId BIGINT NOT NULL,
    Amount DECIMAL(18, 2) NOT NULL,
    Password VARCHAR(255) NOT NULL,
    CreatedAt TIMESTAMP WITHOUT TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UpdatedAt TIMESTAMP WITHOUT TIME ZONE,
    DeletedAt TIMESTAMP WITHOUT TIME ZONE,
    IsDeleted BOOLEAN NOT NULL DEFAULT FALSE,
    CONSTRAINT FK_Transactions_SenderCards FOREIGN KEY (SenderCardId) REFERENCES Cards(Id),
    CONSTRAINT FK_Transactions_ReceiverCards FOREIGN KEY (ReceiverCardId) REFERENCES Cards(Id)
);

CREATE TABLE IF NOT EXISTS PaymentCategories (
    Id BIGSERIAL PRIMARY KEY,
    Name VARCHAR(255) NOT NULL,
    CreatedAt TIMESTAMP WITHOUT TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UpdatedAt TIMESTAMP WITHOUT TIME ZONE,
    DeletedAt TIMESTAMP WITHOUT TIME ZONE,
    IsDeleted BOOLEAN NOT NULL DEFAULT FALSE
);

CREATE TABLE IF NOT EXISTS Payments (
    Id BIGSERIAL PRIMARY KEY,
    Name VARCHAR(255) NOT NULL,
    PaymentCategoryId BIGINT NOT NULL,
    CreatedAt TIMESTAMP WITHOUT TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UpdatedAt TIMESTAMP WITHOUT TIME ZONE,
    DeletedAt TIMESTAMP WITHOUT TIME ZONE,
    IsDeleted BOOLEAN NOT NULL DEFAULT FALSE,
    CONSTRAINT FK_Payments_PaymentCategories FOREIGN KEY (PaymentCategoryId) REFERENCES PaymentCategories(Id)
);

CREATE TABLE IF NOT EXISTS UserPayments (
    Id BIGSERIAL PRIMARY KEY,
    UserId BIGINT NOT NULL,
    CardId BIGINT NOT NULL,
    PaymentId BIGINT NOT NULL,
    AccountNumber VARCHAR(255) NOT NULL,
    Amount DECIMAL(18, 2) NOT NULL,
    AdditionalInformation TEXT,
    CreatedAt TIMESTAMP WITHOUT TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UpdatedAt TIMESTAMP WITHOUT TIME ZONE,
    DeletedAt TIMESTAMP WITHOUT TIME ZONE,
    IsDeleted BOOLEAN NOT NULL DEFAULT FALSE,
    CONSTRAINT FK_UserPayments_Users FOREIGN KEY (UserId) REFERENCES Users(Id),
    CONSTRAINT FK_UserPayments_Cards FOREIGN KEY (CardId) REFERENCES Cards(Id),
    CONSTRAINT FK_UserPayments_Payments FOREIGN KEY (PaymentId) REFERENCES Payments(Id)
);